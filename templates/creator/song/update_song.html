{% extends "base.html" %}
{% block content %}

<body style="background-image: linear-gradient(rgb(241, 241, 241), rgb(238, 228, 228), rgb(243, 239, 239));">
    <div class="d-flex flex-column align-items-center">
        <form action="{{'/song/update/' + song.id|string}}" method="post" enctype="multipart/form-data">
            <table style="height: 1px;">
                <tr>
                    <td>
                        <div class="card p-4" style="width: 25rem;">
                            {% with messages = get_flashed_messages() %}
                            {% if messages %}
                            <div style="background-color: rgb(255, 0, 0, 0.3); border-bottom: 1px solid red; border-radius: 5px;"
                                class="p-1">
                                {{ messages[0] }}
                            </div>
                            {% endif %}
                            {% endwith %}
                            <h4>Edit Song ...</h4>
                            <div class="form-group m-1">
                                <div class="m-1"><label for="title">Song title</label></div>
                                <input type="name" name="title" id="title" placeholder="Enter Title" class="w-100"
                                    value="{{song.title}}">
                            </div>
                            <div class="form-group m-1">
                                <div class="m-1"><label for="description">Description</label></div>
                                <input type="text" name="description" id="description" placeholder="Enter description"
                                    class="w-100" value="{{song.description if song.description else ''}}">
                            </div>
                            <label for="audio">Audio File</label>
                            <div class="form-group m-1 p-1" style="border: 1px solid black">
                                <div class="m-1">
                                    {% if song.audio %}
                                    <span>Uploaded File <audio controls>
                                            <source src={{'/song/' + song.audio}}>
                                        </audio></span>
                                    {% endif %}
                                </div>
                                <input type="file" name="audio" id="audio" placeholder="Audio File"
                                    accept=".mp3,.wav,.ogg">
                            </div>
                            <div class="m-1"><label for="image">Image File</label></div>
                            <div class="form-group m-1 p-1" style="border: 1px solid black">
                                <div class="m-1">
                                    {% if song.image %}
                                    <span>Uploaded File <img src={{'/image/' + song.image}} width="250"
                                            height="auto"></span>
                                    {% endif %}
                                </div>
                                <input type="file" name="image" id="image" placeholder="Image File"
                                    accept="image/*">
                            </div>
                            
                            <div class="form-group m-1">
                                <div class="m-1"><label for="genre">Genre</label></div>
                                <select value="{{song.genre}}" style="width: 100%;" class="p-1 m-1" name="genre">
                                    {% for gen in genres %}
                                        <option value="{{gen.name}}">{{gen.name}}</option>
                                    {% endfor %}
                                </select>
                            </div>

                            <div class="form-group m-1">
                                <div class="m-1"><label for="genre">Language</label></div>
                                <select value="{{song.language}}" style="width: 100%;" class="p-1 m-1" name="language">
                                    {% for language in languages %}
                                        <option value="{{language.name}}">{{language.name}}</option>
                                    {% endfor %}
                                </select>
                            </div>

                            <button type="submit" class="btn btn-primary m-1">Submit</button>

                        </div>
                    </td>
                    <td >
                        <div class="m-1 p-4 card" style="width: 30rem; height: 100%;">
                            <div class="m-1"><label for="lyrics">Lyrics</label></div>
                            <textarea type="text" name="lyrics" id="lyrics" placeholder="Enter lyrics"
                                class="w-100 h-100 p-1" style="height: 1200px; white-space: pre-wrap;">{{song.lyrics if song.lyrics else ''}}</textarea>
                        </div>
                    </td>
                </tr>
            </table>
        </form>
    </div>
</body>
<br>
{% endblock %}