{% extends "base.html" %}
{% block content %}
<body style="background-image: linear-gradient(rgb(241, 241, 241), rgb(238, 228, 228), rgb(243, 239, 239));">
    <div class="m-1 mx-2">
        <div style="height:4vh; width:99vw; background-color: rgb(217, 248, 248);" class="d-flex justify-content-end">
            <div class="text-right px-2"><a href="/creator">Creator Account</a></div>
            <div>|</div>
            <div class="text-right px-2"><a href="/logout">Logout</a></div>
        </div>
    </div>

    <div>
    <div>
        <table>
            <tr>
                <td>
                    <div class="form-group m-1">
                        <div class="m-1"><label for="title">Song Title</label></div>
                        <input type="text" placeholder="Title" name="title" id="title">
                    </div>
                </td>
                <td>
                    <div class="form-group m-1">
                        <div class="m-1"><label for="genre">Genre</label></div>
                        <select style="width: 100%;" class="p-1 m-1" name="genre" id="genre" value="all">
                            <option value="all">All</option>
                            {% for gen in genres %}
                            <option value="{{gen.name}}">{{gen.name}}</option>
                            {% endfor %}
                        </select>
                    </div>
                </td>
                <td>
                    <div class="form-group m-1">
                        <div class="m-1"><label for="genre">Language</label></div>
                        <select class="p-1 m-1" name="language" id="language" value="all">
                            <option value="all">All</option>
                            {% for language in languages %}
                            <option value="{{language.name}}">{{language.name}}</option>
                            {% endfor %}
                        </select>
                    </div>
                </td>
                <td>
                    <button type="button" onclick="search()" class="btn btn-primary m-1"><i
                        class="glyphicon glyphicon-search"></i> Search</button>
                </td>
            </tr>
        </table>
    </div>
</div>
<script>

    const search = async () => {
        title = document.getElementById('title').value
        language = document.getElementById('language').value
        genre = document.getElementById('genre').value

        // console.log(title)
        // params = {
        //         title : title,
        //         language : language,
        // }
        // pr= (new URLSearchParams(params)).toString()
        // console.log(pr)

        const query = `/api/album/song/search?title=${title}&genre=${genre}&language=${language}`
        res = await fetch(query,
            {
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                }
            }
        );
        res.json().then(() => {
            setLike()
        });
    }
</script>

</body>
{% endblock %}

{% block footer %}
    
{% endblock %}